{% extends "grain/base.html" %}
{% load bootstrap3 %}

{% block scripts %}
<link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.3/css/select2.min.css" rel="stylesheet" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/select2-bootstrap-theme/0.1.0-beta.9/select2-bootstrap.min.css" rel="stylesheet" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.3/js/select2.min.js"></script>

<script type="text/javascript">
$(document).ready(function() {
  $.fn.select2.defaults.set( "theme", "bootstrap" );
  $("#{{ form.category.auto_id }}").select2();
  $("#{{ form.vendor.auto_id }}").select2();

  $("#{{ form.price.auto_id }}_1").prop("disabled", true);
  $("form").bind('submit', function(){
    $("#{{ form.price.auto_id }}_1").prop("disabled", false);
  });
});
</script>
{% endblock scripts %}

{% block content %}
{% if messages %}
{% for message in messages %}
<div class="alert alert-{{ message.tags }}" role="alert">
    {{ message }}
</div>
{% endfor %}
{% endif %}

<h1>New Product</h1>

<div class="col-md-4">
  <form method="post" action="{% url 'grain:product_create' %}">
    {% csrf_token %}
    {% bootstrap_form form %}
    {% buttons %}
    <button type="submit" class="btn btn-primary">Create</button>
    <button type="submit" class="btn btn-primary" name="_add_another">Create and add another</button>
    {% endbuttons %}
  </form>
</div>
{% endblock content %}
